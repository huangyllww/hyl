TOKEN
    Name  = "NVME_CONFIG"
    Value  = "1"
    Help  = "Main switch to enable auto configure DXIO in Project"
    TokenType = Boolean
    TargetEQU = Yes
    TargetMAK = Yes
    Master = Yes
End

MODULE
	Help  = "Includes NVMeConfig.mak to Project"
	File  = "NVMeConfig.mak"
End

INFComponent
    Name  = "DxioUpdateForNVMe"
    File  = "DxioUpdateForNVMe.inf"
    Package  = "OemProjectPkg"
End

LibraryMapping
	Class  = "NULL"
	Instance  = "OemProjectPkg.DxioUpdateForNVMe"
	Override  = "OemProjectPkg.AutoDxioConfiguration"
End

ELINK
	Name  = "DXIOUpdateForNVMe,"
	Parent  = "UpdateDxioSetting,"
	InvokeOrder = AfterParent
End
#Hugc-20211222-Add Riser/NVMe control function>>>
PATH
    Name  = "NVME_CONFIG_DIR"
End

ELINK
    Name  = "$(NVME_CONFIG_DIR)/PCIeLinkConfig.sd"
    Parent  = "SETUP_DEFINITIONS"
    InvokeOrder = AfterParent
    Token = "NVME_CONFIG" "=" "1"
End

ELINK
    Name  = "$(NVME_CONFIG_DIR)/PCIeLinkConfig.uni"
    Parent  = "SetupStringFiles"
    InvokeOrder = AfterParent
    Token = "NVME_CONFIG" "=" "1"
End 

#Hugc-20211222-Add Riser/NVMe control function<<<
INFComponent
    Name  = "NVMeConfig"
    File  = "NVMeConfig.inf"
    Package = "OemProjectPkg"
    ModuleTypes = "DXE_DRIVER"
End
#Hugc-20211222-Add Riser/NVMe control function>>>
INFComponent
    Name  = "NVMeConfigListLib"
    File  = "NVMeConfigListLib.inf"
    Package  = "OemProjectPkg"
End

LibraryMapping
    Class  = "NULL"
    Instance  = "OemProjectPkg.NVMeConfigListLib"
    Override  = "OemProjectPkg.AutoDxioConfiguration"
End


#Hugc-20211222-Add Riser/NVMe control function<<<
TOKEN
    Name  = "ServerHotplugDxe_SUPPORT"
    Value  = "0"
    Help  = "Main switch to enable ServerHotplugDxe support in Project"
    TokenType = Boolean
End

TOKEN
	Name  = "HOTPLUG_SUPPORT"
	Value  = "1"
	Help  = "Enables / Disables Pci Bus Driver Native PCI Hotplug support"
	TokenType = Boolean
	TargetMAK = Yes
	TargetH = Yes
End


TOKEN
    Name  = "RSVD_PCI_MEM"
    Value  = "4"
    Help  = "Reserved PCE MEM, number of 1MB"
    TokenType = Integer
    TargetEQU = Yes
    TargetH = Yes
    Token = "HOTPLUG_SUPPORT" "=" "1"
End

TOKEN
    Name  = "RSVD_PCI_IO"
    Value  = "0" #Mizl-20200710-Update NVMe IO Resource
    Help  = "Reserved PCI IO, number of 1KB"
    TokenType = Integer
    TargetEQU = Yes
    TargetH = Yes
    Token = "HOTPLUG_SUPPORT" "=" "1"
End

TOKEN
    Name  = "MmioHotPlugLength"
    Value  = "1, 1, 1, 1, 1, 1, 1, 1"       #32 MB #Mizl-20200415-Resource Conflict at Windows
    Help  = "Value in multiples of 32MB, should be MAX_ROOT_BRIDGE_COUNT entries available"
    TokenType = Expression
    TargetH = Yes
    Token = "HOTPLUG_SUPPORT" "=" "1"
End

TOKEN
    Name  = "IOHotPlugLength"
    Value  = "0, 0, 0, 0, 0, 0, 0, 0"       #8KB #Mizl-20200710-Update NVMe IO Resource
    Help  = "Value in multiples of 4k, should be MAX_ROOT_BRIDGE_COUNT entries available"
    TokenType = Expression
    TargetH = Yes
    Token = "HOTPLUG_SUPPORT" "=" "1"
End


TOKEN
	Name  = "NVME_CONFIG_MAP_COUNT"
	Value  = "1"
	Help  = "If Dual CPU Installed and Single CPU Installed Have The Same NVMe Config,then Set NVME_CONFIG_MAP_COUNT as 1,otherwise,Set It as 2."
	TokenType = Boolean
	TargetMAK = Yes
	TargetH = Yes
End

ELINK
	Name  = "AUTO_NVME_PORTING_LIST"
	InvokeOrder = ReplaceParent
End


ELINK
	Name  = "DUALL_CPU_INSTALLED_CONFIG,"
	Parent  = "AUTO_NVME_PORTING_LIST"
	InvokeOrder = AfterParent
End


ELINK
	Name  = "SINGLE_CPU_INSTALLED_CONFIG,"
	Parent  = "AUTO_NVME_PORTING_LIST"
	InvokeOrder = AfterParent
    Token = "NVME_CONFIG_MAP_COUNT" "=" "2"
End
