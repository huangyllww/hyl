//*************************************************************************
//*************************************************************************
//**                                                                     **
//**        (C)Copyright 1985-2019, American Megatrends, Inc.            **
//**                                                                     **
//**                       All Rights Reserved.                          **
//**                                                                     **
//**      5555 Oakbrook Parkway, Suite 200, Norcross, GA 30093           **
//**                                                                     **
//**                       Phone: (770)-246-8600                         **
//**                                                                     **
//*************************************************************************
//*************************************************************************
//*************************************************************************
//<AMI_FHDR_START>
//
// Name:	NB.sd
//
// Description:	North Bridge Chipset setup definition.
//
//<AMI_FHDR_END>
//*************************************************************************

//mizl-2021-12-09-Sync Setup Setting With BIOS Setup Layout V0.5+>
#if 0
#ifdef MAIN_FORM_SET

 #ifdef FORM_SET_ITEM
    // Define controls to be added to the main page of the formset

    SEPARATOR
    SUBTITLE(STRING_TOKEN(STR_MEMORY))

    text
        help   = STRING_TOKEN(STR_MEMORY_SIZE_HELP),
        text   = STRING_TOKEN(STR_MEMORY_SIZE_NAME),
        text   = STRING_TOKEN(STR_MEMORY_SIZE_VALUE),
        flags  = 0,
        key    = 0;
 #endif

#endif  // MAIN_FORM_SET
#endif
//mizl-2021-12-09-Sync Setup Setting With BIOS Setup Layout V0.5->

#ifdef SETUP_DATA_DEFINITION
/***********************************************************/
/* Put NVRAM data definitions here.
/* For example:	UINT8 Data1;
/* These definitions will be converted by the build process
/* to a definitions of SETUP_DATA fields.
/***********************************************************/

//Interleaving
    UINT8   EnableBankIntlv;
    UINT8   EnableChannelIntlv;
    UINT8   MemClk;
//Memory Clear
    UINT8   MemClr;
    UINT8   MemClrFlag;
#endif

#if defined(VFRCOMPILE) && !defined(CONTROLS_ARE_DEFINED)
#define CONTROL_DEFINITION
#endif

#ifdef CONTROL_DEFINITION

    //<Yaosr001-20181009 add memory clock 2666MHz +>
    #define NB_MEM_CLK\
      oneof varid  = SETUP_DATA.MemClk, questionid = AUTO_ID(MEM_CLOCK_KEY),\
            prompt      = STRING_TOKEN(STR_MEM_CLK_PROMPT ),\
           help        = STRING_TOKEN(STR_MEM_CLK_PROMPT_HELP),\
            option text = STRING_TOKEN(STR_NB_AUTO), value = 0, flags = RESET_REQUIRED | INTERACTIVE;\
            option text = STRING_TOKEN(STR_DDR1333_FREQUENCY_TEXT), value = 1, flags = RESET_REQUIRED | INTERACTIVE;\
            option text = STRING_TOKEN(STR_DDR1600_FREQUENCY_TEXT), value = 2, flags = RESET_REQUIRED | INTERACTIVE;\
            option text = STRING_TOKEN(STR_DDR1866_FREQUENCY_TEXT), value = 3, flags = RESET_REQUIRED | INTERACTIVE;\
            option text = STRING_TOKEN(STR_DDR2133_FREQUENCY_TEXT), value = 4, flags = RESET_REQUIRED | INTERACTIVE;\
            option text = STRING_TOKEN(STR_DDR2400_FREQUENCY_TEXT), value = 5, flags = RESET_REQUIRED | INTERACTIVE;\
            option text = STRING_TOKEN(STR_DDR2666_FREQUENCY_TEXT), value = 6, flags = RESET_REQUIRED | INTERACTIVE;\
            option text = STRING_TOKEN(STR_DDR2933_FREQUENCY_TEXT), value = 7, flags = RESET_REQUIRED | INTERACTIVE;\
           option text = STRING_TOKEN(STR_DDR3200_FREQUENCY_TEXT), value = 8, flags = RESET_REQUIRED | INTERACTIVE;\
           default = 0,\
           default = 0, defaultstore = AmiMfgDefault,\
        endoneof;
    //<Yaosr001-20181009 add memory clock 2666MHz ->
    
    #define NB_BANK_INTERLEAVING\
        oneof varid  = SETUP_DATA.EnableBankIntlv,\
            prompt      = STRING_TOKEN(STR_BANK_INTERLEAVE),\
            help        = STRING_TOKEN(STR_BANK_INTERLEAVE_HELP),\
            option text = STRING_TOKEN(STR_DISABLED_TEXT), value = 0, flags = RESET_REQUIRED;\
            option text = STRING_TOKEN(STR_ENABLED_TEXT), value = 1, flags = DEFAULT | MANUFACTURING | RESET_REQUIRED;\
        endoneof;

    #define NB_CHANNEL_INTERLEAVING\
        oneof varid  = SETUP_DATA.EnableChannelIntlv,\
            prompt      = STRING_TOKEN(STR_CHANNEL_INTERLEAVE),\
            help        = STRING_TOKEN(STR_CHANNEL_INTERLEAVE_HELP),\
            option text = STRING_TOKEN(STR_DISABLED_TEXT), value = 0, flags = RESET_REQUIRED;\
            option text = STRING_TOKEN(STR_ENABLED_TEXT), value = 1, flags = DEFAULT | MANUFACTURING | RESET_REQUIRED;\
        endoneof;

    #define NB_MEMORY_CLEAR\
        oneof varid  = SETUP_DATA.MemClr,\
            prompt      = STRING_TOKEN(STR_MEMCLR),\
            help        = STRING_TOKEN(STR_MEMCLR_HELP),\
            option text = STRING_TOKEN(STR_DISABLED_TEXT), value = 0, flags =DEFAULT | MANUFACTURING | RESET_REQUIRED ;\
            option text = STRING_TOKEN(STR_ENABLED_TEXT), value = 1, flags = RESET_REQUIRED;\
        endoneof;

    #define NB_MEMORY_CLEAR_FLAG\
        checkbox varid  = SETUP_DATA.MemClrFlag,\
            prompt      = STRING_TOKEN(STR_MEMCLR),\
            help        = STRING_TOKEN(STR_MEMCLR_HELP),\
            flags       = 0,\
            default     = 0, defaultstore = AmiMfgDefault,\
        endcheckbox;

#endif // CONTROL_DEFINITION

//---------------------------------------------------------------------------
#ifdef CONTROLS_WITH_DEFAULTS

  //  NB_MEM_CLK
    NB_BANK_INTERLEAVING
    NB_CHANNEL_INTERLEAVING
    NB_MEMORY_CLEAR
    NB_MEMORY_CLEAR_FLAG

#endif // CONTROLS_WITH_DEFAULTS
//---------------------------------------------------------------------------

#ifdef FORM_SET_TYPEDEF
    #ifndef TYPEDEF_SETUP_CPU_FEATURES
    #define TYPEDEF_SETUP_CPU_FEATURES
        #include <CPU\Dxe\CpuDxe.h>
    #endif
#endif


#ifdef CHIPSET_FORM_SET

//--    #ifdef FORM_SET_VARSTORE
//--        #ifndef VARSTORE_SETUP_CPU_FEATURES
//--        #define VARSTORE_SETUP_CPU_FEATURES
//--        varstore SETUP_CPU_FEATURES,
//--            key   = CPU_FEATURES_ID,
//--            name  = SetupCpuFeatures,
//--            guid  = SETUP_GUID;
//--        #endif
//--    #endif

    #ifdef FORM_SET_ITEM
        // Define controls to be added to the main page of the formset
    #endif

    #ifdef FORM_SET_GOTO
        // Define goto commands for the forms defined in this file
    goto NB_FORM_ID,
        prompt = STRING_TOKEN(STR_NB_FORM),
        help = STRING_TOKEN(STR_NB_FORM_HELP);
    #endif

#ifdef FORM_SET_FORM
    // Define forms
    form formid = AUTO_ID(NB_FORM_ID),
        title = STRING_TOKEN(STR_NB_FORM);

        SUBTITLE(STRING_TOKEN(STR_NB_CONFIG))
        SEPARATOR

// Placeholder for additional control in NB page
        #undef FORM_SET_FORM
        #define NB_MAIN_FORM_ITEM
        #include <SetupDefinitions.h>
        #undef NB_MAIN_FORM_ITEM
        #define FORM_SET_FORM

        SUBTITLE(STRING_TOKEN(STR_MEMORY))
        SEPARATOR

        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_VALUE))

        suppressif NOT ideqval OEM_NO_DEFAULT_VARIABLES.OemHide == 0x11; //<Yaosr001-20181008 hide Memory Configuration item>
        goto AMI_MEM_CFG_ID,
        prompt  = STRING_TOKEN(STR_MEMCFG_SUBMENU_STRING),
        help    = STRING_TOKEN(STR_MEMCFG_SUBMENU_STRING);
        endif; //<Yaosr001-20181008 hide Memory Configuration item>


#if NB_SHOW_EXTENDED_SETUP_INFO
        goto NB_FORM_SCKT0_ID,
        prompt  = STRING_TOKEN(STR_SCKT0_FORM),
        help    = STRING_TOKEN(STR_SCKT0_HELP);

        suppressif ideqval SETUP_DATA.InstalledCpus == 1;
            goto NB_FORM_SCKT1_ID,
            prompt  = STRING_TOKEN(STR_SCKT1_FORM),
            help    = STRING_TOKEN(STR_SCKT1_HELP);
        endif;
#endif //  #if NB_SHOW_EXTENDED_SETUP_INFO

    endform;    // form id  NB_FORM_ID

    // ====================================================================
    // Socket 0 Information
    // ====================================================================
#if NB_SHOW_EXTENDED_SETUP_INFO
    form formid = AUTO_ID(NB_FORM_SCKT0_ID),
    	title = STRING_TOKEN(STR_SCKT0_FORM);

    	SUBTITLE(STRING_TOKEN(STR_SCKT0_FORM))

        SEPARATOR
        SEPARATOR
        // Dimm Info
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT0_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT1_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT2_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT3_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT4_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT5_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT6_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT7_VALUE))
	SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT8_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT9_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT10_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT11_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT12_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT13_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT14_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT0_SLOT15_VALUE))


    endform;    // form id NB_FORM_SCKT0_ID

    form formid = AUTO_ID(NB_FORM_SCKT1_ID),
        title = STRING_TOKEN(STR_SCKT1_FORM);

        SUBTITLE(STRING_TOKEN(STR_SCKT1_FORM))

        SEPARATOR
        SEPARATOR
        // Dimm Info
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT0_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT1_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT2_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT3_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT4_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT5_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT6_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT7_VALUE))
	SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT8_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT9_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT10_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT11_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT12_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT13_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT14_VALUE))
        SUBTITLE(STRING_TOKEN(STR_MEMORY_SIZE_SCKT1_SLOT15_VALUE))

    endform;    // form id NB_FORM_SCKT0_ID

#endif // #if NB_SHOW_EXTENDED_SETUP_INFO

    form formid = AUTO_ID(AMI_MEM_CFG_ID),
        title = STRING_TOKEN(STR_MEMCFG_SUBMENU_STRING);
        subtitle text = STRING_TOKEN(STR_MEMCFG_SUBMENU_STRING);
        subtitle text = STRING_TOKEN(STR_BLANK_STRING);
        SEPARATOR

     //   NB_MEM_CLK
        
       
        NB_BANK_INTERLEAVING  //<Wangyia001-20170601 BIOS Setup Options(IPMI)>
        NB_CHANNEL_INTERLEAVING  //<Wangyia001-20170601 BIOS Setup Options(IPMI)>
//        NB_MEMORY_CLEAR

    endform;    // form id AMI_MEM_CFG_ID


#endif // #ifdef FORM_SET_FORM

#endif // #ifdef CHIPSET_FORM_SET

//*************************************************************************
//*************************************************************************
//**                                                                     **
//**        (C)Copyright 1985-2019, American Megatrends, Inc.            **
//**                                                                     **
//**                       All Rights Reserved.                          **
//**                                                                     **
//**      5555 Oakbrook Parkway, Suite 200, Norcross, GA 30093           **
//**                                                                     **
//**                       Phone: (770)-246-8600                         **
//**                                                                     **
//*************************************************************************
//*************************************************************************